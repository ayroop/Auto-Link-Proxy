# راهنمای سریع تنظیمات

## ⚡ تنظیمات فوری

### 1. استفاده از دامنه (پیشنهادی)
در فایل `config.php`:
```php
const USE_IP_INSTEAD_OF_DOMAIN = false;
```
**لینک‌های تولید شده:**
```
https://filmkhabar.space/proxy.php?url=...
```

### 2. استفاده از IP اختصاصی
در فایل `config.php`:
```php
const USE_IP_INSTEAD_OF_DOMAIN = true;
```
**لینک‌های تولید شده:**
```
https://45.12.143.141/proxy.php?url=...
```

---

## 🔧 تنظیمات مهم

### دامنه‌های مجاز:
```php
const ALLOWED_HOSTS = [
    'sv1.cinetory.space',
    // اضافه کردن دامنه‌های دیگر
];
```

### فعال/غیرفعال کردن لاگ:
```php
const LOG_ENABLED = true;  // true = فعال، false = غیرفعال
```

### محدودیت اندازه فایل (برای فایل‌های 4K):
```php
// برای فایل‌های 4K و بزرگ (تا 10 گیگابایت)
const MAX_FILE_SIZE = 10 * 1024 * 1024 * 1024;  // 10 گیگابایت

// برای فایل‌های معمولی (تا 5 گیگابایت)
const MAX_FILE_SIZE = 5 * 1024 * 1024 * 1024;   // 5 گیگابایت

// بدون محدودیت
const MAX_FILE_SIZE = 0;  // بدون محدودیت
```

### تنظیمات عملکرد برای فایل‌های بزرگ:
```php
// حافظه بیشتر برای فایل‌های 4K
const MEMORY_LIMIT = '512M';  // 512 مگابایت

// بافر بزرگتر برای استریم بهتر
const STREAM_BUFFER_SIZE = 16384;  // 16KB

// Timeout بیشتر برای فایل‌های بزرگ
const CURL_TIMEOUT = 300;  // 5 دقیقه
```

---

## 🧪 تست سریع

### تست با دامنه:
```
https://filmkhabar.space/test_proxy.html
```

### تست با IP:
```
https://45.12.143.141/test_proxy.html
```

### تست مستقیم پروکسی:
```
https://filmkhabar.space/proxy.php?url=https://sv1.cinetory.space/h2/movie/sv1/tt1780967/Seberg.2019.480p.HardSub.SerFil.mp4
```

---

## 📊 اطلاعات سرور

- **دامنه:** filmkhabar.space
- **IP اختصاصی:** 45.12.143.141
- **پینگ:** ~178ms
- **موقعیت:** ایران

---

## 🚨 مشکلات رایج

### خطای "دامنه غیرمجاز"
```php
// بررسی کنید که در config.php:
const ALLOWED_HOSTS = ['sv1.cinetory.space'];
```

### خطای "اتصال ناموفق"
- بررسی کنید cURL فعال است
- بررسی کنید سرور خارجی در دسترس است

### خطای "فایل خیلی بزرگ"
```php
// افزایش محدودیت اندازه فایل:
const MAX_FILE_SIZE = 10 * 1024 * 1024 * 1024;  // 10 گیگابایت

// یا غیرفعال کردن محدودیت:
const MAX_FILE_SIZE = 0;  // بدون محدودیت
```

### خطای "زمان اجرا تمام شد"
```php
// افزایش محدودیت‌های PHP:
const MAX_EXECUTION_TIME = 0;  // بدون محدودیت
const CURL_TIMEOUT = 300;      // 5 دقیقه
```

### لاگ کار نمی‌کند
```php
// بررسی کنید:
const LOG_ENABLED = true;
// و مجوزهای فایل proxy.log
```

---

## 📝 یادداشت‌های مهم

1. **HTTPS**: حتماً از HTTPS استفاده کنید
2. **مجوزها**: فایل‌ها را با مجوزهای مناسب آپلود کنید
3. **نظارت**: لاگ‌ها را مرتب بررسی کنید
4. **بروزرسانی**: کد را مرتب بروزرسانی کنید
5. **فایل‌های بزرگ**: برای فایل‌های 4K حافظه و timeout کافی تنظیم کنید

---

## 🔗 لینک‌های مفید

- **مستندات کامل:** `README.md`
- **راهنمای نصب:** `SETUP_GUIDE.md`
- **صفحه تست:** `test_proxy.html`
- **تنظیمات:** `config.php` 